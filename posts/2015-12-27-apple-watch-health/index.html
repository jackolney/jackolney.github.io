<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta http-equiv=Accept-CH content="DPR, Viewport-Width, Width"><link rel=icon href=/me.jpg type=image/gif><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" media=print onload='this.media="all"'><noscript><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet></noscript><link rel=stylesheet href=/css/font.css media=all><meta property="og:url" content="https://jackolney.github.io/posts/2015-12-27-apple-watch-health/"><meta property="og:site_name" content="Jack Olney"><meta property="og:title" content="Has the Apple Watch improved my fitness?"><meta property="og:description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-12-27T09:41:00+00:00"><meta property="article:modified_time" content="2015-12-27T09:41:00+00:00"><meta property="article:tag" content="R"><meta property="article:tag" content="Apple Watch"><meta name=twitter:card content="summary"><meta name=twitter:title content="Has the Apple Watch improved my fitness?"><meta name=twitter:description content="Does the presence of an Apple Watch correlate with an increase in my daily steps?"><link rel=stylesheet href=/bootstrap-5/css/bootstrap.min.css media=all><link rel=stylesheet href=/css/header.css media=all><link rel=stylesheet href=/css/footer.css media=all><link rel=stylesheet href=/css/theme.css media=all><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--text-link-color:#007bff;--background-color:#eaedf0;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--text-link-color-dark:#ffffff;--background-color-dark:#18191a;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{font-size:1rem;font-weight:400;line-height:1.5;text-align:left}html{background-color:var(--background-color) !important}body::-webkit-scrollbar{height:0;width:8px;background-color:var(--background-color)}::-webkit-scrollbar-track{border-radius:1rem}::-webkit-scrollbar-thumb{border-radius:1rem;background:#b0b0b0;outline:1px solid var(--background-color)}#search-content::-webkit-scrollbar{width:.5em;height:.1em;background-color:var(--background-color)}</style><meta name=description content="Does the presence of an Apple Watch correlate with an increase in my daily steps?"><link rel=stylesheet href=/css/single.css><script defer src=/fontawesome-6/all-6.4.2.js></script><title>Has the Apple Watch improved my fitness? | Jack Olney</title></head><body class=light><script>let localStorageValue=localStorage.getItem("pref-theme"),mediaQuery=window.matchMedia("(prefers-color-scheme: dark)").matches;switch(localStorageValue){case"dark":document.body.classList.add("dark");break;case"light":document.body.classList.remove("dark");break;default:mediaQuery&&document.body.classList.add("dark");break}</script><header id=profileHeader><nav class="pt-3 navbar navbar-expand-lg animate"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=/><img src=/me.jpg width=30 height=30 class="d-inline-block align-top">
Jack Olney</a><div><input id=search autocomplete=off class="form-control mr-sm-2 d-none d-md-block" placeholder='Ctrl + k to Search...' aria-label=Search oninput=searchOnChange(event)></div><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation">
<svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text d-block d-md-none"><div class=nav-link><input id=search autocomplete=off class="form-control mr-sm-2" placeholder='Ctrl + k to Search...' aria-label=Search oninput=searchOnChange(event)></div></li><li class="nav-item navbar-text"><a class=nav-link href=/#about aria-label=about>About Me</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#experience aria-label=experience>Experience</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#education aria-label=education>Education</a></li><li class="nav-item navbar-text"><a class=nav-link href=/#contact aria-label=contact>Contact me</a></li><li class="nav-item navbar-text"><a class=nav-link href=/posts title="Blog posts">Blog</a></li><li class="nav-item navbar-text"><div class=text-center><button id=theme-toggle>
<svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></li></ul></div></div></nav></header><div id=content><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><div class="title mb-5"><h1 class="text-center mb-4">Has the Apple Watch improved my fitness?</h1><div class=text-center>Dec 27, 2015
<span id=readingTime>min read</span></div></div><article class="page-content p-2"><h1 id=overview>Overview</h1><p>Having owned an Apple Watch since early May, I have built up a substantial amount of data in Apple&rsquo;s &lsquo;HealthKit&rsquo;, detailing my daily steps from in excess of a year prior to owning the watch to at least six months after. Therefore, a simple analysis of whether the watch has improved my fitness should be possible. Additionally, I can pull out heart-rate data, stair-flight data, exercise data and map a whole bunch of other interesting stuff.</p><p>All data is from my iPhone 6+ and my Apple Watch, all analysis was conducted in R and all figures were produced with ggplot2.</p><h1 id=setup>Setup</h1><p>The first thing to do is it to export the relevant data from &lsquo;HealthKit&rsquo; as a csv file. We do this using the <a href="https://itunes.apple.com/gb/app/qs-access/id920297614?mt=8">QS Access</a> iOS app from the App Store. The app allows you to define the columns by selecting the relevant data to export (e.g. Steps, Heart Rate etc.) and then define rows as being hourly or daily. The simplest way to transfer the csv from iPhone to Mac is via email. Now we can jump right into R and start cleaning the data.</p><h2 id=data-cleaning>Data Cleaning</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#75715e># Set the working directory to the folder containing the exported .csv</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>setwd</span>(<span style=color:#e6db74>&#34;~/&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Load &#39;dplyr&#39; and &#39;ggplot2&#39; for data analysis and plotting</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>require</span>(dplyr)
</span></span><span style=display:flex><span><span style=color:#a6e22e>require</span>(ggplot2)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Load in the exported .csv file</span>
</span></span><span style=display:flex><span><span style=color:#75715e># The data I am importing was exported from my iPhone on 4th September, 2015</span>
</span></span><span style=display:flex><span>MyCsvData <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>read.csv</span>(<span style=color:#e6db74>&#34;./HealthData/HealthData_04-09-15.csv&#34;</span>)
</span></span><span style=display:flex><span>MyCsvDataHourly <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>read.csv</span>(<span style=color:#e6db74>&#34;./HealthData/HealthDataHourly_04-09-15.csv&#34;</span>)
</span></span></code></pre></div><p>Probably the most time consuming aspect of any data analysis is cleaning and correctly formatting the data. Here, we must ensure that R can understand the exported date format correctly. To rectify this we define a function <code>FormatData()</code> which takes the entire dataframe as an arguement and returns a dataframe containing the correct date format.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span>FormatData <span style=color:#f92672>&lt;-</span> <span style=color:#66d9ef>function</span>(Data) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Define the &#39;Start&#39; and &#39;End&#39; columns.</span>
</span></span><span style=display:flex><span>    StartDate <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>as.Date</span>(Data<span style=color:#f92672>$</span>Start,format<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;%d-%b-%Y %H:%M&#34;</span>)
</span></span><span style=display:flex><span>    EndDate <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>as.Date</span>(Data<span style=color:#f92672>$</span>Finish,format<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;%d-%b-%Y %H:%M&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Turn into a smart dataframe.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># if you print a tbl_df to screen only the first 10 rows are shown.</span>
</span></span><span style=display:flex><span>    MyData <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>tbl_df</span>(Data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Cleanup data.names</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyData)[1] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;StartTime&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyData)[2] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;EndTime&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyData)[3] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;Calories&#34;</span> <span style=color:#75715e># kcal</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyData)[4] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;Distance&#34;</span> <span style=color:#75715e># In miles</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyData)[5] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;Flights&#34;</span> <span style=color:#75715e># count</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyData)[6] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;HeartRate&#34;</span> <span style=color:#75715e># bpm</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyData)[7] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;Steps&#34;</span> <span style=color:#75715e># count</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Formatting date. #</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>####################</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Code    Value</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># %d  Day of the month (decimal number)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># %m  Month (decimal number)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># %b  Month (abbreviated)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># %B  Month (full name)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># %y  Year (2 digit)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># %Y  Year (4 digit)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Deploy and mutate whole dataFrame</span>
</span></span><span style=display:flex><span>    FormatDate <span style=color:#f92672>&lt;-</span> <span style=color:#66d9ef>function</span>(x) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>format</span>(<span style=color:#a6e22e>strptime</span>(TestDate,<span style=color:#e6db74>&#34;%d-%b-%Y %H:%M&#34;</span>),<span style=color:#e6db74>&#34;%d-%m-%Y&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    FormatTime <span style=color:#f92672>&lt;-</span> <span style=color:#66d9ef>function</span>(x) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>format</span>(<span style=color:#a6e22e>strptime</span>(x,<span style=color:#e6db74>&#34;%d-%b-%Y %H:%M&#34;</span>),<span style=color:#e6db74>&#34;%H:%M&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># StartDate &lt;- apply(MyData[1],2,FormatDate)</span>
</span></span><span style=display:flex><span>    StartTime <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>apply</span>(MyData[1],<span style=color:#ae81ff>2</span>,FormatTime)
</span></span><span style=display:flex><span>    StartDateTime <span style=color:#f92672>&lt;-</span> MyData[1]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># EndDate &lt;- apply(MyData[2],2,FormatDate)</span>
</span></span><span style=display:flex><span>    EndTime <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>apply</span>(MyData[2],<span style=color:#ae81ff>2</span>,FormatTime)
</span></span><span style=display:flex><span>    EndDateTime <span style=color:#f92672>&lt;-</span> MyData[2]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Pull together a new dataframe</span>
</span></span><span style=display:flex><span>    MyFormattedData <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>tbl_df</span>(<span style=color:#a6e22e>data.frame</span>(
</span></span><span style=display:flex><span>        StartDate,
</span></span><span style=display:flex><span>        StartTime,
</span></span><span style=display:flex><span>        EndDate,
</span></span><span style=display:flex><span>        EndTime,
</span></span><span style=display:flex><span>        StartDateTime,
</span></span><span style=display:flex><span>        EndDateTime,
</span></span><span style=display:flex><span>        MyData<span style=color:#f92672>$</span>Calories,
</span></span><span style=display:flex><span>        MyData<span style=color:#f92672>$</span>Distance,
</span></span><span style=display:flex><span>        MyData<span style=color:#f92672>$</span>Flights,
</span></span><span style=display:flex><span>        MyData<span style=color:#f92672>$</span>HeartRate,
</span></span><span style=display:flex><span>        MyData<span style=color:#f92672>$</span>Steps))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Neaten up names</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[1] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;StartDate&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[2] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;StartTime&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[3] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;EndDate&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[4] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;EndTime&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[5] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;StartDateTime&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[6] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;EndDateTime&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[7] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;Calories&#34;</span> <span style=color:#75715e># kcal</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[8] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;Distance&#34;</span> <span style=color:#75715e># In miles</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[9] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;Flights&#34;</span> <span style=color:#75715e># count</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[10] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;HeartRate&#34;</span> <span style=color:#75715e># bpm</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>names</span>(MyFormattedData)[11] <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;Steps&#34;</span> <span style=color:#75715e># count</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>(MyFormattedData)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Applying this to our dataset</span>
</span></span><span style=display:flex><span>DailyData <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>FormatData</span>(MyCsvData)
</span></span><span style=display:flex><span>HourlyData <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>FormatData</span>(MyCsvDataHourly)
</span></span></code></pre></div><h1 id=analysis>Analysis</h1><p>We first produce a plot of steps against time, with some additional stratification in the form of heart rate using the following script and our hourly dataset (for greater resolution).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#a6e22e>ggplot</span>(HourlyData, <span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> StartDate, y <span style=color:#f92672>=</span> Steps)) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>geom_point</span>(<span style=color:#a6e22e>aes</span>(size <span style=color:#f92672>=</span> HeartRate, alpha <span style=color:#f92672>=</span> Steps), col <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Blue&#34;</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>theme_classic</span>()
</span></span></code></pre></div><p><img src=../../images/apple-watch-health/Steps-HeartRate-1.png alt=Steps-HeartRate></p><p>The first thing we see is a considerable amount of 0-step hours in the data. This is because I sleep for about 6 hours per night, or perhaps may have not worn my watch that day. In any case, it is advisable to remove these zero values. However, it is nice to see the colour that including my heart rate from May 2015 adds to the plot. The large points in the upper right of the figure are likely from periods of exercise (as will be discussed later).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#75715e># Cutting the crap</span>
</span></span><span style=display:flex><span>NonZero <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>filter</span>(HourlyData,Steps <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Re-do the previous plot</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ggplot</span>(NonZero, <span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> StartDate, y <span style=color:#f92672>=</span> Steps)) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>geom_point</span>(<span style=color:#a6e22e>aes</span>(size <span style=color:#f92672>=</span> HeartRate, alpha <span style=color:#f92672>=</span> Steps), col <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Blue&#34;</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>theme_classic</span>()
</span></span></code></pre></div><p><img src=../../images/apple-watch-health/Steps-HeartRate-2.png alt=Steps-HeartRate></p><p>That&rsquo;s better! Right, now some for simple regression analysis.</p><h2 id=simple-regression>Simple Regression</h2><blockquote><p><em><strong>&ldquo;Irrespective of workouts, has the Apple Watch increased the number of steps I walk each day?&rdquo;</strong></em></p></blockquote><p>To answer this question, we are going to build a simple regression model; but first, we must add a new column informing the data of whether I owned the watch on a particular day.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#75715e># Cut the zero-step data from the dataset (as before)</span>
</span></span><span style=display:flex><span>theData <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>filter</span>(DailyData,Steps <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3rd of May 2015 was the day I bought my Apple Watch</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add a column with &#39;1&#39; if date &gt;= 3rd of May 2015, else &#39;0&#39;</span>
</span></span><span style=display:flex><span>theData <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>mutate</span>(theData, Watch <span style=color:#f92672>=</span> <span style=color:#a6e22e>ifelse</span>(StartDate <span style=color:#f92672>&gt;=</span> <span style=color:#e6db74>&#34;2015-05-03&#34;</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>))
</span></span></code></pre></div><p>If we a create a simple linear model model with &lsquo;Steps&rsquo; as the dependent variable (the outcome whose variation is being studied), and &lsquo;Watch&rsquo; as the independent variable (input or potential reason for variation).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span>fit1 <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>lm</span>(Steps <span style=color:#f92672>~</span> Watch, data <span style=color:#f92672>=</span> theData)
</span></span><span style=display:flex><span><span style=color:#a6e22e>summary</span>(fit1)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Call:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># lm(formula = Steps ~ Watch, data = theData)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Residuals:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     Min      1Q  Median      3Q     Max</span>
</span></span><span style=display:flex><span><span style=color:#75715e># -6849.3 -2993.1   -60.1  2352.2 13485.9</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Coefficients:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#             Estimate Std. Error t value Pr(&gt;|t|)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># (Intercept)   5328.1      247.5  21.531  &lt; 2e-16 ***</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Watch         1611.2      408.7   3.942 9.82e-05 ***</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ---</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Residual standard error: 3637 on 339 degrees of freedom</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Multiple R-squared:  0.04383,   Adjusted R-squared:  0.04101</span>
</span></span><span style=display:flex><span><span style=color:#75715e># F-statistic: 15.54 on 1 and 339 DF,  p-value: 9.819e-05</span>
</span></span></code></pre></div><p>From this simple model, we see that prior to buying the watch, I walked an average of 5,328 steps per day (the intercept of the model); yes, not very many steps. However, after buying the watch, I walked an average of 1,611 <em>more</em> steps per day &ndash; great!</p><p>Although the R-squared value, the coefficient of determination, (or in english, how close the data fit to the model), is only 4%. This means that the presence of the watch only explains 4% of the variation in my daily steps. This is because we have yet to control for other factors, such as the day of the week, or whether I was exercising at the time. The model is saying that the presence of the watch in my life is not the sole reason for my movement. However, the value of R-squared should always be taken with a pinch of salt. There is inherent randomness in my daily steps and it would be near impossible to control for all additional covariates. As the F-statistic shows a statistically significant relationship (p &lt; 0.05), we accept that the watch has improved my fitness level. Checks of the residuals increase our confidence in the findings.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-R data-lang=R><span style=display:flex><span><span style=color:#a6e22e>ggplot</span>(theData, <span style=color:#a6e22e>aes</span>(x <span style=color:#f92672>=</span> StartDate, y <span style=color:#f92672>=</span> Steps)) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>geom_point</span>(<span style=color:#a6e22e>aes</span>(col <span style=color:#f92672>=</span> <span style=color:#a6e22e>as.factor</span>(Watch)), alpha <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>theme_classic</span>() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>geom_smooth</span>(method <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;lm&#34;</span>, col <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;red&#34;</span>, fill <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;blue&#34;</span>) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>labs</span>(title <span style=color:#f92672>=</span> <span style=color:#a6e22e>paste</span>(<span style=color:#e6db74>&#34;Linear Regression of presence of Apple Watch against daily activity in steps\nAdj R2 = &#34;</span>,<span style=color:#a6e22e>signif</span>(<span style=color:#a6e22e>summary</span>(fit1)<span style=color:#f92672>$</span>adj.r.squared, <span style=color:#ae81ff>5</span>),
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Intercept =&#34;</span>,<span style=color:#a6e22e>signif</span>(fit1<span style=color:#f92672>$</span>coef[[1]],<span style=color:#ae81ff>5</span> ),
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34; Slope =&#34;</span>,<span style=color:#a6e22e>signif</span>(fit1<span style=color:#f92672>$</span>coef[[2]], <span style=color:#ae81ff>5</span>),
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34; P =&#34;</span>,<span style=color:#a6e22e>signif</span>(<span style=color:#a6e22e>summary</span>(fit1)<span style=color:#f92672>$</span>coef[2,<span style=color:#ae81ff>4</span>], <span style=color:#ae81ff>5</span>))
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><img src=../../images/apple-watch-health/LinearRegression.png alt=Regression></p><h1 id=an-aside>An Aside</h1><p>As a quick end to this post, I wanted to see what my hourly heart rate looked like over time. Additionally, I was keen to see whether my heart rate ever drops below 40bpm (bradycardia) or above 120bpm (tachycardia). As we see from the figure below, my heart rate doesn&rsquo;t drop below 40bpm and only rarely steps about 120bpm. It should be noted that the outliers ~200bpm are from periods of exercise. As I collect more data, and exercise more, I would hope to look for a downward trend in my heart rate as my maximum heart rate when exercising declines, indicating increased fitness, one would hope.</p><p><img src=../../images/apple-watch-health/Heart-Rate.png alt=Heart-Rate></p></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div id=stickySideBar class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><a href=#data-cleaning>Data Cleaning</a></li></ul><ul><li><a href=#simple-regression>Simple Regression</a></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=https://jackolney.github.io/tags/r target=_blank>R</a></li><li class=list-inline-item><a href=https://jackolney.github.io/tags/apple-watch target=_blank>Apple Watch</a></li></ul></aside><aside class=social><h5>Social</h5><div class=social-content><ul class=list-inline><li class="list-inline-item text-center"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjackolney.github.io%2fposts%2f2015-12-27-apple-watch-health%2f"><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://twitter.com/share?text=Has%20the%20Apple%20Watch%20improved%20my%20fitness%3f&url=https%3a%2f%2fjackolney.github.io%2fposts%2f2015-12-27-apple-watch-health%2f"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://api.whatsapp.com/send?text=Has%20the%20Apple%20Watch%20improved%20my%20fitness%3f: https%3a%2f%2fjackolney.github.io%2fposts%2f2015-12-27-apple-watch-health%2f"><i class="fab fa-whatsapp"></i></a></li><li class="list-inline-item text-center"><a target=_blank href='mailto:?subject=Has%20the%20Apple%20Watch%20improved%20my%20fitness%3f&amp;body=Check%20out%20this%20site https%3a%2f%2fjackolney.github.io%2fposts%2f2015-12-27-apple-watch-health%2f'><i class="fa fa-envelope"></i></a></li></ul></div></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-4"><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//jackolney.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><div class=progress><div id=scroll-progress-bar class=progress-bar role=progressbar aria-valuenow=0 aria-valuemin=0 aria-valuemax=100></div></div><script src=/js/scrollProgressBar.js></script><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}let stickySideBarElem=document.getElementById("stickySideBar"),stickyNavBar=!1;if(stickyNavBar){let e=document.getElementById("profileHeader"),t=e.offsetHeight+15;stickySideBarElem.style.top=t+"px"}else stickySideBarElem.style.top="50px"</script><script src=/js/readingTime.js></script></div><footer><div class="container py-3" id=recent-posts><div class="h3 text-center text-secondary py-3">Recent posts</div><div class="row justify-content-center"><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class="card-body bg-transparent p-3 shadow-sm"><a href=/posts/2020-03-06-health-data/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Rapid access to health data in the UK">Rapid access to health …</h5></a><div class="card-text secondary-font"><p><p>In the field of public health, there is a need to access health and healthcare-related data much
faster than ever before.</p><p>A pertinent example of this is the current coronavirus outbreak (COVID-19). In early February 2020,
merely days after the first cases were confirmed in the UK, the <a href=https://www.gov.uk/government/organisations/department-of-health-and-social-care>Department of …</a></p></p></div></div><div class="mt-auto card-footer"><span class=float-start>March 6, 2020</span>
<a href=/posts/2020-03-06-health-data/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class="card-body bg-transparent p-3 shadow-sm"><a href=/posts/2017-02-21-croi/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="CROI 2017">CROI 2017</h5></a><div class="card-text secondary-font"><p><p>For the second year in a row, I was invited to speak at the annual <a href=http://www.croiconference.org/>Conference on Retroviruses and Opportunistic Infections (CROI)</a>. This year the conference was held in one of my favourite cities, Seattle.</p><p>I spoke about my new web-based modelling tool that enables countries to enter data on their HIV …</p></p></div></div><div class="mt-auto card-footer"><span class=float-start>February 21, 2017</span>
<a href=/posts/2017-02-21-croi/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div><div class="col-lg-4 col-md-6 pt-2"><div class="card h-100"><div class="card-body bg-transparent p-3 shadow-sm"><a href=/posts/2016-11-17-thesis/ class="primary-font card-title"><h5 class="card-title bg-transparent" title="Writing a PhD Thesis">Writing a PhD Thesis</h5></a><div class="card-text secondary-font"><p><p>Right from the start of my PhD, I was keen to avoid leaving the &ldquo;writing up&rdquo; stage until the last moment. After hearing stories from other students of 24-hour stints in the library and solid weekends spent slaving over their theses in the final months, I figured there must be another …</p></p></div></div><div class="mt-auto card-footer"><span class=float-start>November 17, 2016</span>
<a href=/posts/2016-11-17-thesis/ class="float-end btn btn-outline-info btn-sm">Read</a></div></div></div></div></div><div class="text-center pt-2"></div><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center"><div class=pb-2><a href=https://jackolney.github.io/ title="Jack Olney"><img alt="Footer logo" src=/me.jpg height=40px width=40px></a></div>&copy; 2025 All Rights Reserved<div class=text-secondary>Made with
<span class=text-danger>&#10084;
</span>and
<a href=https://github.com/gurusabarish/hugo-profile target=_blank title="Designed and developed by gurusabarish">Hugo Profile</a></div></div></div></div></footer><script src=/bootstrap-5/js/bootstrap.bundle.min.js></script><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map(function(e){return new bootstrap.Tooltip(e)})</script><script src=/js/search.js></script><section id=search-content class=py-2><div class=container id=search-results></div></section></body></html>