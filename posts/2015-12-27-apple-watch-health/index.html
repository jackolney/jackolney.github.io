<!DOCTYPE html>
<html>

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="icon" href=/fav.png type="image/gif">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>


<link rel="stylesheet" href="/css/font.css" media="all">



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123-45', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<meta property="og:title" content="Has the Apple Watch improved my fitness?" />
<meta property="og:description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jackolney.github.io/posts/2015-12-27-apple-watch-health/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-12-27T09:41:00+00:00" />
<meta property="article:modified_time" content="2015-12-27T09:41:00+00:00" /><meta property="og:site_name" content="Jack Olney" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Has the Apple Watch improved my fitness?"/>
<meta name="twitter:description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?"/>


<link rel="stylesheet" href="/bootstrap-5/css/bootstrap.min.css" media="all"><link rel="stylesheet" href="/css/header.css" media="all">
<link rel="stylesheet" href="/css/footer.css" media="all">


<link rel="stylesheet" href="/css/theme.css" media="all">




<style>
    :root {
        --text-color: #343a40;
        --text-secondary-color: #6c757d;
        --background-color: #eaedf0;
        --secondary-background-color: #64ffda1a;
        --primary-color: #007bff;
        --secondary-color: #f8f9fa;

         
        --text-color-dark: #e4e6eb;
        --text-secondary-color-dark: #b0b3b8;
        --background-color-dark: #18191a;
        --secondary-background-color-dark: #212529;
        --primary-color-dark: #ffffff;
        --secondary-color-dark: #212529;
    }
    body {
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: left;
    }
</style>

<meta name="description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?">
<link rel="stylesheet" href="/css/single.css">


<script defer src="/fontawesome-5/all-5.15.4.js"></script>

  <title>
Has the Apple Watch improved my fitness? | Jack Olney

  </title>
</head>

<body class="light" onload="loading()">
  
  
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>



<header>
    <nav class="pt-3 navbar navbar-expand-lg animate">
        <div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5">
            
            <a class="navbar-brand primary-font text-wrap" href="/">
                
                Jack Olney
                
            </a>

            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
                    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
                </svg>
            </button>

            
            <div class="collapse navbar-collapse text-wrap primary-font" id="navbarContent">
                <ul class="navbar-nav ms-auto text-center">
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#about" aria-label="about">About</a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#experience"
                            aria-label="experience">Experience</a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#education"
                            aria-label="education">Education</a>
                    </li>
                    

                    

                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#contact"
                            aria-label="contact">Contact</a>
                    </li>
                    

                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/posts" title="Blog posts">
                            
                            Blog
                        </a>
                    </li>
                    
                    
                </ul>

                
                
                <div class="text-center">
                    <button id="theme-toggle">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                </div>
            
                
            </div>
        </div>
    </nav>
</header>
<div id="content">
<section id="single">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-md-12 col-lg-9">
        <div class="pr-lg-4">
          <div class="title mb-5">
            <h1 class="text-center mb-4">Has the Apple Watch improved my fitness?</h1>
            <div class="text-center">
               
              <small>|</small>
              Dec 27, 2015
            </div>
          </div>
          
          <article class="page-content  p-2">
          <h1 id="overview">Overview</h1>
<p>Having owned an Apple Watch since early May, I have built up a substantial amount of data in Apple&rsquo;s &lsquo;HealthKit&rsquo;, detailing my daily steps from in excess of a year prior to owning the watch to at least six months after. Therefore, a simple analysis of whether the watch has improved my fitness should be possible. Additionally, I can pull out heart-rate data, stair-flight data, exercise data and map a whole bunch of other interesting stuff.</p>
<p>All data is from my iPhone 6+ and my Apple Watch, all analysis was conducted in R and all figures were produced with ggplot2.</p>
<h1 id="setup">Setup</h1>
<p>The first thing to do is it to export the relevant data from &lsquo;HealthKit&rsquo; as a csv file. We do this using the <a href="https://itunes.apple.com/gb/app/qs-access/id920297614?mt=8">QS Access</a> iOS app from the App Store. The app allows you to define the columns by selecting the relevant data to export (e.g. Steps, Heart Rate etc.) and then define rows as being hourly or daily. The simplest way to transfer the csv from iPhone to Mac is via email. Now we can jump right into R and start cleaning the data.</p>
<h2 id="data-cleaning">Data Cleaning</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span><span style="color:#75715e"># Set the working directory to the folder containing the exported .csv</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setwd</span>(<span style="color:#e6db74">&#34;~/&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Load &#39;dplyr&#39; and &#39;ggplot2&#39; for data analysis and plotting</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">require</span>(dplyr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">require</span>(ggplot2)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Load in the exported .csv file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The data I am importing was exported from my iPhone on 4th September, 2015</span>
</span></span><span style="display:flex;"><span>MyCsvData <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.csv</span>(<span style="color:#e6db74">&#34;./HealthData/HealthData_04-09-15.csv&#34;</span>)
</span></span><span style="display:flex;"><span>MyCsvDataHourly <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.csv</span>(<span style="color:#e6db74">&#34;./HealthData/HealthDataHourly_04-09-15.csv&#34;</span>)
</span></span></code></pre></div><p>Probably the most time consuming aspect of any data analysis is cleaning and correctly formatting the data. Here, we must ensure that R can understand the exported date format correctly. To rectify this we define a function <code>FormatData()</code> which takes the entire dataframe as an arguement and returns a dataframe containing the correct date format.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>FormatData <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(Data) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Define the &#39;Start&#39; and &#39;End&#39; columns.</span>
</span></span><span style="display:flex;"><span>    StartDate <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.Date</span>(Data<span style="color:#f92672">$</span>Start,format<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;%d-%b-%Y %H:%M&#34;</span>)
</span></span><span style="display:flex;"><span>    EndDate <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.Date</span>(Data<span style="color:#f92672">$</span>Finish,format<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;%d-%b-%Y %H:%M&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Turn into a smart dataframe.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if you print a tbl_df to screen only the first 10 rows are shown.</span>
</span></span><span style="display:flex;"><span>    MyData <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tbl_df</span>(Data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Cleanup data.names</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyData)[1] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;StartTime&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyData)[2] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;EndTime&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyData)[3] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Calories&#34;</span> <span style="color:#75715e"># kcal</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyData)[4] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Distance&#34;</span> <span style="color:#75715e"># In miles</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyData)[5] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Flights&#34;</span> <span style="color:#75715e"># count</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyData)[6] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;HeartRate&#34;</span> <span style="color:#75715e"># bpm</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyData)[7] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Steps&#34;</span> <span style="color:#75715e"># count</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Formatting date. #</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">####################</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Code    Value</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># %d  Day of the month (decimal number)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># %m  Month (decimal number)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># %b  Month (abbreviated)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># %B  Month (full name)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># %y  Year (2 digit)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># %Y  Year (4 digit)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Deploy and mutate whole dataFrame</span>
</span></span><span style="display:flex;"><span>    FormatDate <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(x) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">format</span>(<span style="color:#a6e22e">strptime</span>(TestDate,<span style="color:#e6db74">&#34;%d-%b-%Y %H:%M&#34;</span>),<span style="color:#e6db74">&#34;%d-%m-%Y&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    FormatTime <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(x) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">format</span>(<span style="color:#a6e22e">strptime</span>(x,<span style="color:#e6db74">&#34;%d-%b-%Y %H:%M&#34;</span>),<span style="color:#e6db74">&#34;%H:%M&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># StartDate &lt;- apply(MyData[1],2,FormatDate)</span>
</span></span><span style="display:flex;"><span>    StartTime <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">apply</span>(MyData[1],<span style="color:#ae81ff">2</span>,FormatTime)
</span></span><span style="display:flex;"><span>    StartDateTime <span style="color:#f92672">&lt;-</span> MyData[1]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># EndDate &lt;- apply(MyData[2],2,FormatDate)</span>
</span></span><span style="display:flex;"><span>    EndTime <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">apply</span>(MyData[2],<span style="color:#ae81ff">2</span>,FormatTime)
</span></span><span style="display:flex;"><span>    EndDateTime <span style="color:#f92672">&lt;-</span> MyData[2]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Pull together a new dataframe</span>
</span></span><span style="display:flex;"><span>    MyFormattedData <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tbl_df</span>(<span style="color:#a6e22e">data.frame</span>(
</span></span><span style="display:flex;"><span>        StartDate,
</span></span><span style="display:flex;"><span>        StartTime,
</span></span><span style="display:flex;"><span>        EndDate,
</span></span><span style="display:flex;"><span>        EndTime,
</span></span><span style="display:flex;"><span>        StartDateTime,
</span></span><span style="display:flex;"><span>        EndDateTime,
</span></span><span style="display:flex;"><span>        MyData<span style="color:#f92672">$</span>Calories,
</span></span><span style="display:flex;"><span>        MyData<span style="color:#f92672">$</span>Distance,
</span></span><span style="display:flex;"><span>        MyData<span style="color:#f92672">$</span>Flights,
</span></span><span style="display:flex;"><span>        MyData<span style="color:#f92672">$</span>HeartRate,
</span></span><span style="display:flex;"><span>        MyData<span style="color:#f92672">$</span>Steps))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Neaten up names</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[1] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;StartDate&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[2] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;StartTime&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[3] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;EndDate&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[4] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;EndTime&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[5] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;StartDateTime&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[6] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;EndDateTime&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[7] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Calories&#34;</span> <span style="color:#75715e"># kcal</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[8] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Distance&#34;</span> <span style="color:#75715e"># In miles</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[9] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Flights&#34;</span> <span style="color:#75715e"># count</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[10] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;HeartRate&#34;</span> <span style="color:#75715e"># bpm</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">names</span>(MyFormattedData)[11] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Steps&#34;</span> <span style="color:#75715e"># count</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">return</span>(MyFormattedData)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Applying this to our dataset</span>
</span></span><span style="display:flex;"><span>DailyData <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">FormatData</span>(MyCsvData)
</span></span><span style="display:flex;"><span>HourlyData <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">FormatData</span>(MyCsvDataHourly)
</span></span></code></pre></div><h1 id="analysis">Analysis</h1>
<p>We first produce a plot of steps against time, with some additional stratification in the form of heart rate using the following script and our hourly dataset (for greater resolution).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(HourlyData, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> StartDate, y <span style="color:#f92672">=</span> Steps)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(size <span style="color:#f92672">=</span> HeartRate, alpha <span style="color:#f92672">=</span> Steps), col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Blue&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">theme_classic</span>()
</span></span></code></pre></div><p><img src="../../images/apple-watch-health/Steps-HeartRate-1.png" alt="Steps-HeartRate"></p>
<p>The first thing we see is a considerable amount of 0-step hours in the data. This is because I sleep for about 6 hours per night, or perhaps may have not worn my watch that day. In any case, it is advisable to remove these zero values. However, it is nice to see the colour that including my heart rate from May 2015 adds to the plot. The large points in the upper right of the figure are likely from periods of exercise (as will be discussed later).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span><span style="color:#75715e"># Cutting the crap</span>
</span></span><span style="display:flex;"><span>NonZero <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(HourlyData,Steps <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Re-do the previous plot</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(NonZero, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> StartDate, y <span style="color:#f92672">=</span> Steps)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(size <span style="color:#f92672">=</span> HeartRate, alpha <span style="color:#f92672">=</span> Steps), col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Blue&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">theme_classic</span>()
</span></span></code></pre></div><p><img src="../../images/apple-watch-health/Steps-HeartRate-2.png" alt="Steps-HeartRate"></p>
<p>That&rsquo;s better! Right, now some for simple regression analysis.</p>
<h2 id="simple-regression">Simple Regression</h2>
<blockquote>
<p><em><strong>&ldquo;Irrespective of workouts, has the Apple Watch increased the number of steps I walk each day?&rdquo;</strong></em></p>
</blockquote>
<p>To answer this question, we are going to build a simple regression model; but first, we must add a new column informing the data of whether I owned the watch on a particular day.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span><span style="color:#75715e"># Cut the zero-step data from the dataset (as before)</span>
</span></span><span style="display:flex;"><span>theData <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(DailyData,Steps <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3rd of May 2015 was the day I bought my Apple Watch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add a column with &#39;1&#39; if date &gt;= 3rd of May 2015, else &#39;0&#39;</span>
</span></span><span style="display:flex;"><span>theData <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">mutate</span>(theData, Watch <span style="color:#f92672">=</span> <span style="color:#a6e22e">ifelse</span>(StartDate <span style="color:#f92672">&gt;=</span> <span style="color:#e6db74">&#34;2015-05-03&#34;</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>))
</span></span></code></pre></div><p>If we a create a simple linear model model with &lsquo;Steps&rsquo; as the dependent variable (the outcome whose variation is being studied), and &lsquo;Watch&rsquo; as the independent variable (input or potential reason for variation).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>fit1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(Steps <span style="color:#f92672">~</span> Watch, data <span style="color:#f92672">=</span> theData)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">summary</span>(fit1)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Call:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># lm(formula = Steps ~ Watch, data = theData)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Residuals:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     Min      1Q  Median      3Q     Max</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -6849.3 -2993.1   -60.1  2352.2 13485.9</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Coefficients:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#             Estimate Std. Error t value Pr(&gt;|t|)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># (Intercept)   5328.1      247.5  21.531  &lt; 2e-16 ***</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Watch         1611.2      408.7   3.942 9.82e-05 ***</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ---</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Residual standard error: 3637 on 339 degrees of freedom</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Multiple R-squared:  0.04383,   Adjusted R-squared:  0.04101</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># F-statistic: 15.54 on 1 and 339 DF,  p-value: 9.819e-05</span>
</span></span></code></pre></div><p>From this simple model, we see that prior to buying the watch, I walked an average of 5,328 steps per day (the intercept of the model); yes, not very many steps. However, after buying the watch, I walked an average of 1,611 <em>more</em> steps per day &ndash; great!</p>
<p>Although the R-squared value, the coefficient of determination, (or in english, how close the data fit to the model), is only 4%. This means that the presence of the watch only explains 4% of the variation in my daily steps. This is because we have yet to control for other factors, such as the day of the week, or whether I was exercising at the time. The model is saying that the presence of the watch in my life is not the sole reason for my movement. However, the value of R-squared should always be taken with a pinch of salt. There is inherent randomness in my daily steps and it would be near impossible to control for all additional covariates. As the F-statistic shows a statistically significant relationship (p &lt; 0.05), we accept that the watch has improved my fitness level. Checks of the residuals increase our confidence in the findings.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(theData, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> StartDate, y <span style="color:#f92672">=</span> Steps)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geom_point</span>(<span style="color:#a6e22e">aes</span>(col <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(Watch)), alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">theme_classic</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;lm&#34;</span>, col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>, fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;blue&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#a6e22e">paste</span>(<span style="color:#e6db74">&#34;Linear Regression of presence of Apple Watch against daily activity in steps\nAdj R2 = &#34;</span>,<span style="color:#a6e22e">signif</span>(<span style="color:#a6e22e">summary</span>(fit1)<span style="color:#f92672">$</span>adj.r.squared, <span style="color:#ae81ff">5</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Intercept =&#34;</span>,<span style="color:#a6e22e">signif</span>(fit1<span style="color:#f92672">$</span>coef[[1]],<span style="color:#ae81ff">5</span> ),
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34; Slope =&#34;</span>,<span style="color:#a6e22e">signif</span>(fit1<span style="color:#f92672">$</span>coef[[2]], <span style="color:#ae81ff">5</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34; P =&#34;</span>,<span style="color:#a6e22e">signif</span>(<span style="color:#a6e22e">summary</span>(fit1)<span style="color:#f92672">$</span>coef[2,<span style="color:#ae81ff">4</span>], <span style="color:#ae81ff">5</span>))
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p><img src="../../images/apple-watch-health/LinearRegression.png" alt="Regression"></p>
<h1 id="an-aside">An Aside</h1>
<p>As a quick end to this post, I wanted to see what my hourly heart rate looked like over time. Additionally, I was keen to see whether my heart rate ever drops below 40bpm (bradycardia) or above 120bpm (tachycardia). As we see from the figure below, my heart rate doesn&rsquo;t drop below 40bpm and only rarely steps about 120bpm. It should be noted that the outliers ~200bpm are from periods of exercise. As I collect more data, and exercise more, I would hope to look for a downward trend in my heart rate as my maximum heart rate when exercising declines, indicating increased fitness, one would hope.</p>
<p><img src="../../images/apple-watch-health/Heart-Rate.png" alt="Heart-Rate"></p>

          </article>
        </div>
      </div>
      <div class="col-sm-12 col-md-12 col-lg-3">
        <div class="sticky-sidebar">
          
          <aside class="toc">
              <h5>
                Table Of Contents
              </h5>
              <div class="toc-content">
                <nav id="TableOfContents">
  <ul>
    <li><a href="#data-cleaning">Data Cleaning</a></li>
  </ul>

  <ul>
    <li><a href="#simple-regression">Simple Regression</a></li>
  </ul>
</nav>
              </div>
          </aside>
          

          
          <aside class="tags">
            <h5>Tags</h5>
            <ul class="tags-ul list-unstyled list-inline">
              
              <li class="list-inline-item"><a href="https://jackolney.github.io/tags/r" target="_blank">R</a></li>
              
              <li class="list-inline-item"><a href="https://jackolney.github.io/tags/apple-watch" target="_blank">Apple Watch</a></li>
              
            </ul>
          </aside>
          

          
          <aside class="social">
            <h5>Social</h5>
            <div class="social-content">
              <ul class="list-inline">
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://twitter.com/share?text=Has%20the%20Apple%20Watch%20improved%20my%20fitness%3f&url=https%3a%2f%2fjackolney.github.io%2fposts%2f2015-12-27-apple-watch-health%2f">
                    <i class="fab fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://api.whatsapp.com/send?text=Has%20the%20Apple%20Watch%20improved%20my%20fitness%3f: https%3a%2f%2fjackolney.github.io%2fposts%2f2015-12-27-apple-watch-health%2f">
                    <i class="fab fa-whatsapp"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="mailto:?subject=Has%20the%20Apple%20Watch%20improved%20my%20fitness%3f&amp;body=Check out this site https%3a%2f%2fjackolney.github.io%2fposts%2f2015-12-27-apple-watch-health%2f">
                    <i class="fa fa-envelope"></i>
                  </a>
                </li>
              </ul>
            </div>
          </aside>
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-9 p-4">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "jackolney" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
  </div>
  <button class="p-2 px-3" onclick="topFunction()" id="topScroll">
    <i class="fas fa-angle-up"></i>
  </button>
</section>

<script>
  var topScroll = document.getElementById("topScroll");
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      topScroll.style.display = "block";
    } else {
      topScroll.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
</script>


  </div><footer>
    <div class="container py-3" id="recent-posts">
    
    <div class="h3 text-center text-secondary py-3">Recent posts</div>
    <div class="row justify-content-center">
        
    </div>
    
</div><div class="text-center pt-2">
    
    <span class="px-1">
        <a href="https://github.com" aria-label="github">
            <svg xmlns="http://www.w3.org/2000/svg" width="2.7em" height="2.7em" viewBox="0 0 1792 1792">
                <path
                    d="M522 1352q-8 9-20-3-13-11-4-19 8-9 20 3 12 11 4 19zm-42-61q9 12 0 19-8 6-17-7t0-18q9-7 17 6zm-61-60q-5 7-13 2-10-5-7-12 3-5 13-2 10 5 7 12zm31 34q-6 7-16-3-9-11-2-16 6-6 16 3 9 11 2 16zm129 112q-4 12-19 6-17-4-13-15t19-7q16 5 13 16zm63 5q0 11-16 11-17 2-17-11 0-11 16-11 17-2 17 11zm58-10q2 10-14 14t-18-8 14-15q16-2 18 9zm964-956v960q0 119-84.5 203.5t-203.5 84.5h-224q-16 0-24.5-1t-19.5-5-16-14.5-5-27.5v-239q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105 20.5-150.5q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27t-83.5-38.5-86-13.5q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5-55.5-62.5q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 103t.5 68q0 22-11 33.5t-22 13-33 1.5h-224q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z" />

                <metadata>
                    <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                        xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:dc="http://purl.org/dc/elements/1.1/">
                        <rdf:Description about="https://iconscout.com/legal#licenses"
                            dc:title="Github, Online, Project, Hosting, Square"
                            dc:description="Github, Online, Project, Hosting, Square" dc:publisher="Iconscout"
                            dc:date="2016-12-14" dc:format="image/svg+xml" dc:language="en">
                            <dc:creator>
                                <rdf:Bag>
                                    <rdf:li>Font Awesome</rdf:li>
                                </rdf:Bag>
                            </dc:creator>
                        </rdf:Description>
                    </rdf:RDF>
                </metadata>
            </svg>
        </a>
    </span>
    

    
    <span class="px-1">
        <a href="https://linkedin.com" aria-label="linkedin">
            <svg xmlns="http://www.w3.org/2000/svg" width='2.4em' height='2.4em' fill="#fff" aria-label="LinkedIn"
                viewBox="0 0 512 512">
                <rect width="512" height="512" fill="#0077b5" rx="15%" />
                <circle cx="142" cy="138" r="37" />
                <path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198" />
                <path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32" />
            </svg>
        </a>
    </span>
    

    
    <a href="https://twitter.com" aria-label="twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px">
            <path fill="#03a9f4"
                d="M42,37c0,2.762-2.239,5-5,5H11c-2.762,0-5-2.238-5-5V11c0-2.762,2.238-5,5-5h26c2.761,0,5,2.238,5,5 V37z" />
            <path fill="#fff"
                d="M36,17.12c-0.882,0.391-1.999,0.758-3,0.88c1.018-0.604,2.633-1.862,3-3 c-0.951,0.559-2.671,1.156-3.793,1.372C31.311,15.422,30.033,15,28.617,15C25.897,15,24,17.305,24,20v2c-4,0-7.9-3.047-10.327-6 c-0.427,0.721-0.667,1.565-0.667,2.457c0,1.819,1.671,3.665,2.994,4.543c-0.807-0.025-2.335-0.641-3-1c0,0.016,0,0.036,0,0.057 c0,2.367,1.661,3.974,3.912,4.422C16.501,26.592,16,27,14.072,27c0.626,1.935,3.773,2.958,5.928,3c-1.686,1.307-4.692,2-7,2 c-0.399,0-0.615,0.022-1-0.023C14.178,33.357,17.22,34,20,34c9.057,0,14-6.918,14-13.37c0-0.212-0.007-0.922-0.018-1.13 C34.95,18.818,35.342,18.104,36,17.12" />
        </svg>
    </a>
    

    

    
</div><div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-4 text-center">
            <div class="pb-2">
                <a href="https://jackolney.github.io/" title="Jack Olney">
                    <img alt="Footer logo" src=""
                        height="40px" width="40px">
                </a>
            </div>
            &copy; 2022  All Rights Reserved
            <div class="text-secondary">
                Made with
                <span class="text-danger">
                    &#10084;
                </span>
                and
                <a href="https://github.com/gurusabarish/hugo-profile" target="_blank"
                    title="Designed and developed by gurusabarish">
                    Hugo Profile
                </a>
            </div>
        </div>
    </div>
</div></footer><script src="/bootstrap-5/js/bootstrap.bundle.min.js"></script>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

</script>

<script>
    let loadingIcons;

    function loading() {
        myVar = setTimeout(showPage, 100);
    }

    function showPage() {
        try{
            document.getElementById("loading-icons").style.display = "block";
        } catch(err) {}
    }
</script></body>

</html>